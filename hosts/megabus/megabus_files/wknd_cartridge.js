try{!function(a,b,c){if("undefined"==typeof c||c&&!c.loaded){var d,e={EmailType:{account:0,transact:1,marketing:2,alert:3,click:4},PhoneType:{home:1,work:2,mobile:3,other:4},FunType:{Checkout:1,Shipping:2,Payment:3,Promo:4,Gift:5},PageType:{Product:0,Search:1,Category:3,Purchase:4,Other:5},PayType:{unknown:-1,cc:0,visa:1,mc:2,amex:3,pp:4,bml:5,other:6,disc:7,google:8,gc:9,diners:10,jcb:11,amazon:12},PaymentInt:{cn:"icn",em:"iem",ey:"iey",cvv:"icvv"},ShipType:{other:-1,free:0,nextday:1,twoday:2,threeday:3,standard:4,fedex2day:5,fedexonight:6,willcall:7,pickup:8,ground:9,special:10,overnight:11,express:12,usps:13,supersaver:14,fedex3day:15,fedexstd:16,fedexsmpost:17,rush:18,premium:19,upssurepost:20,uspspriority:21},productList:{listId:{favorites:0,wishlist:1},listActionType:{add:0,qtyChange:1,qtychange:1,removeproduct:2,removeProduct:2,remove:2,removeAll:3,removeall:3}},trackRecs:{source:{shopper:1,person:1,product:2,products:2},action:{view:1,click:2}}},f=function(a,b){var c=a;return(""+b).split(".").forEach(function(a){null!==c&&(c="undefined"==typeof c[a]?null:c[a])}),c},g=function(a){if("object"!=typeof a||null===a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=g(a[c]));return b},h=function(b,c){var d=f(a,"bouncex.utils.shqInterceptEvent"),e=d&&d[b]?d[b]:null,h=e&&"function"==typeof e?e.bind(d):null,i=g(c);return e?(h&&i&&h(i),V(b+" intercepted by core-ui","warn",i),!0):e||!a.localStorage.getItem("shq_intercept_conversion")||"purchase"!==b?!1:(Va({pageType:"purchase",orderId:c.order_id?c.order_id:"intercepted_order_"+wa(),usebasket:!0}),void V("Conversion Interception Fallback: usebasket","warn",c))},i=function(b){var c=f(a,"bouncex.utils.shqMirrorEvent"),d=f(b,"eventname")||f(b,"source");if(c&&d&&c[d]){var e=g(b),h=c[d].bind(c);V("shq mirror event: "+d,"mirror",e),"function"==typeof h&&h(e)}},j=f(a,"bouncex.website.sms.shqId"),k="shqsession",l="|",m="^",n=20,o="bxid",p=!1,q=!1,r=a._shqconfig&&a._shqconfig.ts?a._shqconfig.ts:"tr2.smarterhq.io",s="app1",t="//"+r+"/"+s+"/",u="shq",v=null,w="https://"+r+"/v2/"+j,x=2048,y=[],z=e.PageType.Other,A=!1,B="00000000-0000-0000-0000-000000000000",C=function(a){if("string"==typeof a)return xa(a);if(Array.isArray(a))for(var b=0;b<a.length;b++){var c=xa(a[b]);if(c)return c}return"function"==typeof a?a.call():null},D=f(a,"bouncex.vars.shq_campaign_key")||"utm_campaign",E=f(a,"bouncex.vars.shq_medium_key")||"utm_medium",F=f(a,"bouncex.vars.shq_campaign_key")||"utm_source",G=f(a,"bouncex.vars.shq_term_key")||"utm_term",H=f(a,"bouncex.vars.shq_content_key")||"utm_content",I=f(a,"bouncex.vars.shq_single_param_map")||null,J=function(a){V("Campaign Key manually set to","ok",a),D=a},K=function(a){V("Medium Key manually set to","ok",a),E=a},L=function(a){V("Source Key manually set to","ok",a),F=a},M=function(a){V("Term Key manually set to","ok",a),G=a},N=function(a){V("Content Key manually set to","ok",a),H=a},O="smtr1x1.gif",P={email:w+"/emails",cart:{view:w+"/cart",add:w+"/cart/add",qty:w+"/cart/quantity",remove:w+"/cart/remove",empty:w+"/cart/empty"}},Q={cInternal:!1,set check(a){this.cInternal=a,this.dispatch()},waiting:!1,get check(){return this.cInternal},cbFuncs:[],cbArgs:[],watch:function(a,b){this.cbFuncs.push(a),this.cbArgs.push(b)},dispatch:function(){for(var a=this.cbFuncs,b=this.cbArgs,c=a.length,d=0;c>d;d++){var e=a.pop(),f=b.pop();V("Queuing request with the updated cookie","ok",[e,f]),e.apply(null,f)}}},R=!1,S=!1,T={error:"#F94133",warning:"#FDBB03",warn:"#FDBB03","standard log":"#00d8ff","default":"#00d8ff",ok:"#57e050",purple:"#af7adb",info:"#00d8ff",wknd:"#2FB89D",mirror:"#b2b9bf"},U="true"===a.localStorage.shq_debugging_enabled,V=function(b,c,d,e){if(a._shqdbl||(a._shqdbl=[]),a._shqdbl.push({message:b,logType:c,auxContent:d}),e||U){c=c?c.toLowerCase():"default";var f=T[c]?T[c]:T["default"];a.console.log("%cSHQ LOG: %c"+b,"color:"+T.purple+";font-size:16px;font-weight:bold;","color:"+f+";font-size:16px;font-weight:bold;",d)}},W=function(){var b=na(a.location.href.replace("#bxdev",""),"shq_debugging_enabled",!1),c="To disable, click here: "+b;"true"===xa("shq_debugging_enabled")||a.location.href.indexOf("#bxdev")>-1?(a.localStorage.setItem("shq_debugging_enabled",!0),a.console.log("%cSHQ DEBUGGING %cENABLED","color:#af7adb;font-size:16px;font-weight:bold;","color:#57e050;font-size:16px;font-weight:bold;",c)):"false"===xa("shq_debugging_enabled")&&(a.localStorage.removeItem("shq_debugging_enabled"),U=!1,a.console.log("%cSHQ DEBUGGING %cDISABLED","color:#af7adb;font-size:16px;font-weight:bold;","color:#e25151;font-size:16px;font-weight:bold;")),U=localStorage&&"true"===localStorage.getItem("shq_debugging_enabled")?!0:!1},X="",Y=!0,Z=function(){var b=f(a,"bouncex.website.domain");return b&&"."!==b[0]?b="."+b:b||(b=a.location.hostname),b},$=function(a){var b={};if(a&&a.ce&&(b.expiresAt=ka(a.ce)),a&&a.cp&&(b.path=a.cp),a&&a.cd)b.domain=a.cd;else{var c=Z();c&&(b.domain=c)}return a&&a.samesite&&(b.samesite=a.samesite),a&&a.secure&&(b.secure=a.secure),b},_=function(a,b){ab(a,b)},aa=function(){if(void 0===d&&(d=ga.get(u),void 0===d||null===d||0===d.length))return null;var a=d?d.split("^"):"";return a.length>2?a[1]:void 0},ba=function(){if(void 0===d&&(d=ga.get(u),void 0===d||null===d||0===d.length))return null;var a=d?d.split("^"):"";return a.length>2?a[2]:void 0},ca=new Date,da=function(a){var b=6e4,c=20*b,d=a/1e4-621355968e5,e=(new Date).getTime(),f=e-d;return f>c?(V("Cookie Session Expired","warn"),!0):!1},ea=function(){var a=(new Date).getTime(),b=1e4*(a+621355968e5);return b},fa=function(a){if(d){var b=d.split("^");return b[0]=a,d=b.join("^"),eb(d),ga.set(u,d,$({ce:"730",cp:X,samesite:"none",secure:Y})),d}return Va({pageType:"other",cu:!0}),!1},ga=function(){var a={expiresAt:null,path:"/",domain:null,secure:!0,samesite:"none"},c=function(b){var c=g(a);return"object"==typeof b&&null!==b&&("object"==typeof b.expiresAt&&b.expiresAt instanceof Date&&(c.expiresAt=b.expiresAt),"string"==typeof b.path&&""!==b.path&&(c.path=b.path),"string"==typeof b.domain&&""!==b.domain&&(c.domain=b.domain),b.secure===!0&&(c.secure=b.secure),b.samesite&&(c.samesite=b.samesite)),c},d=function(a){return a=c(a),("object"==typeof a.expiresAt&&a.expiresAt instanceof Date?"; expires="+a.expiresAt.toGMTString():"")+"; path="+a.path+("string"==typeof a.domain?"; domain="+a.domain:"")+(a.samesite?"; samesite="+a.samesite:"")+(a.secure===!0?"; secure":"")},e=function(){var a,c,d,e,f={},g=b.cookie.split(";");for(a=0;a<g.length;a+=1){c=g[a].split("="),d=c[0].replace(/^\s*/,"").replace(/\s*$/,"");try{e=decodeURIComponent(c[1])}catch(h){e=c[1]}f[d]=e}return f},f=e(),h=function(a,b){return b&&b===!0&&(f=e()),"undefined"!=typeof f[a]?f[a]:null},i=function(a){return a&&a===!0&&(f=e()),f},j=function(a,c,e){var f=e||{};("undefined"==typeof c||null===c)&&(c="",f.expiresAt=new Date(ca.getTime()+-31536e6)),X&&(f.path=X);var g=d(f);b.cookie=a+"="+encodeURIComponent(c)+g},k=function(a,b){j(a,null,b)},l=function(){var a=!1,b="_s_R",c="data";return j(b,c),h(b,!0)===c&&(k(b),a=!0),a};return{get:h,getAll:i,set:j,del:k,test:l}}(),ha=function(){var a,b={};a=ga.get(k);var c=function(){a="";for(var c in b)if(b.hasOwnProperty(c)){if(a.length>4e3)break;a+=c+(b[c]?l+b[c]:""),a+=m}var d=a.lastIndexOf(m);-1!==d&&(a=a.slice(0,d));var e=Z(),f=new Date(ca.getTime()+60*n*1e3);ga.set(k,a,e?{domain:e,expiresAt:f,secure:Y,samesite:"none"}:{expiresAt:f,samesite:"none",secure:Y})};if(a){for(var d=a.split(m),e=0;e<d.length;e++)if(d[e]){var f=d[e].split(l);f[0]&&(b[f[0]]=f.length>1?f[1]:null)}c()}return{get:function(a){return b[a]?b[a]:null},set:function(a,d){return"undefined"==typeof d&&(d=null),b.hasOwnProperty(a)&&b[a]===d?!1:(b[a]=d,c(),!0)},remove:function(a){return b.hasOwnProperty(a)?(delete b[a],c(),!0):!1},updateTimeout:function(){var a=0;for(var d in b)if(b.hasOwnProperty(d)){a++;break}a>0&&c()}}}(),ia=function(a){var b=[];return a&&y&&y.length&&(b=y.filter(function(b){return b["item:id"]===a})),b[0]},ja=function(){var b=f(a,"bouncex.website.ibx.ulpj");for(var c in b)if(b[c]&&"espemailid"===b[c])return c;return null},ka=function(a){var b=new Date;return b.setTime(b.getTime()+864e5*a),b},la=function(a){return a&&"string"==typeof a?a.replace(/[$,]/gi,""):null},ma=function(a){var b="number"==typeof a?a:la(a);return isNaN(b)&&(b=.01,V("moneyToIntString Was passed NaN value","error")),null!==b&&(b=Math.round(100*parseFloat(b).toFixed(2))),b},na=function(a,b,c){if(a&&void 0!==b&&void 0!==c){var d,e;return e=a.indexOf("?")>-1?"&":"?",d=a+e+b+"="+c}return V("Could not add query string parameter because param or value are undefined","error"),!1},oa=function(a){return"https:"+t},pa=function(){function a(a){return 10>a?"0"+a:a}var b=new Date,c=[b.getUTCFullYear(),a(b.getUTCMonth()+1),a(b.getUTCDate())].join("-"),d=[a(b.getUTCHours()),a(b.getUTCMinutes()),a(b.getUTCSeconds())].join(":"),e=b.getUTCMilliseconds(),f=c+"T"+d+"."+e+"Z";return f},qa=function(a,b,c){if(a.cartItems&&a.cartItems.length||a.Items&&a.Items.length){for(var d=a.cartItems||a.Items,e=[],f=0;f<d.length;f++)if(d[f].productId)d[f].productId.length&&d[f].productId.length>64&&(d[f].productId=d[f].productId.substr(0,64),V("productId truncated!","error",d[f.productId])),e.push({ProductId:d[f].productId,UnitPrice:Number(la(d[f].price).toFixed(2)),Quantity:Number(d[f].qty)});else{if(d[f].ProductId)return d[f];V("missing product ID","error",d[f])}return e}},ra=function(b){var c=this,d=f(a,"bouncex.et.setInterval")?a.bouncex.et.setInterval.bind(a.bouncex.et):function(a){setInterval(a,1e3)},e={},g=function(a){return"function"==typeof a.filter?b.filter(a.filter):b},h=function(a,b){var f=0,h=d(function(){var c=g(a),d=c.length;if(d>f)for(f=d;c.length;){var h=c.shift();e[h["gtm.uniqueEventId"]]||(e[h["gtm.uniqueEventId"]]=h,b(h))}});c.handlerMethods.push(h)},i={all:function(a,b){a.filter=function(){return!0},h(a,b)},ecom:function(a,b){a.filter=function(a){return a.hasOwnProperty("ecommerce")},h(a,b)},custom:function(a,b){h(a,b)}};return Object.defineProperty(c,"ecom",{get:function(){return b.filter(function(a){return a.hasOwnProperty("ecommerce")})}}),c.handlerMethods=[],c.processedEvents=e,c.watch=function(a,b){var c=b.ecommerce?"ecom":b.filter?"custom":"all";i[c](b,a)},c},sa=function(){var c=null;if(b.referrer&&b.referrer.length>0)try{var d=b.referrer.split("/")[2].split("."),e=a.location.hostname.split(".");d.length>=2&&e.length>=2&&d[d.length-2]!==e[e.length-2]&&(c=b.referrer)}catch(f){V("getReferrer error","error",f)}return c},ta=function(a){return a?a.replace(/&/g,"","g").replace(/"/g,"","g").replace(/'/g,"","g").replace(/</g,"","g").replace(/>/g,"","g"):""},ua=function(){try{return a.location.pathname.toLowerCase()}catch(b){return V("couldn't read pathname!","error",b),""}}(),va=ta(b.title),wa=function(){return Math.floor(2e9*Math.random())},xa=function(a){var b="",c=ya();return c&&c[a.toLowerCase()]&&(b=c&&c[a.toLowerCase()]?c[a.toLowerCase()]:null),b},ya=function(){try{var b,c=/\+/g,d=/([^&=]+)=?([^&]*)/g,e=function(a){return decodeURIComponent(a.replace(c," "))},f=a.location.search.substring(1),g={};for(b=d.exec(f);b;){try{g[e(b[1]).toLowerCase()]=e(b[2])}catch(h){g[e(b[1]).toLowerCase()]=""}b=d.exec(f)}return g}catch(h){return V("could not read url params","error",h),{}}},za=function(){var a=ca.getTimezoneOffset();return a},Aa=function(a,b,c){try{a&&a[b]&&(a[c]=a[b],delete a[b])}catch(d){V("failed renaming prop "+b+" to "+c,"error",d)}},Ba=function(a){return a?a.replace(/'/g,""):""},Ca=function(a,b){var c="";for(var d in a)if(a.hasOwnProperty(d))switch(typeof a[d]){case"number":case"boolean":c+=b&&-1===c.indexOf("?")?"?"+d+"="+encodeURIComponent(a[d]):"&"+d+"="+encodeURIComponent(a[d]);break;case"string":a[d]&&a[d].length>0&&(c+=b&&-1===c.indexOf("?")?"?"+d+"="+encodeURIComponent(Ba(a[d])):"&"+d+"="+encodeURIComponent(Ba(a[d])))}return c},Da=function(a){var b=/^([a-zA-Z0-9_\-\.\+]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/;return a?b.test(a):!1},Ea=function(b,c){a._shqdbl||(a._shqdbl=[]);var d={action:b,passed:g(c),srPageView:[],srImgReq:[]};return a._shqdbl.push({"tracking event":d.action,eventBody:d}),U&&a.console.log("%cSHQ TRACKING EVENT: %c"+d.action,"color:#af7adb;font-size:16px;font-weight:bold;","color:#00d8ff;font-size:16px;font-weight:bold;",d),d},Fa=function(){try{var b,c,d,e,f;if(I&&I.param&&xa(I.param)&&I.delim){var g=xa(I.param),h="string"==typeof g?g.split(I.delim):null,i=function(a){if(Array.isArray(a)){for(var b=null,c=0;c<a.length;c++){var d=i(a[c]);d&&b?b+=I.delim+d:d&&(b=d)}return b}return null!==a&&a<h.length?h[a]:null};h&&Array.isArray(h)&&(b=C(D)||i(I.campaign),c=i(I.medium),d=i(I.source),e=i(I.term),f=i(I.content))}else b=C(D),c=C(E),d=C(F),e=C(G),f=C(H);var j={action:"campaign",pageId:v,utm_campaign:b,utm_medium:c,utm_source:d,utm_term:e,utm_content:f,ref:sa()},k=null;if(j.ref&&0===j.ref.length&&j.utm_campaign&&j.utm_campaign.length&&0===j.utm_campaign.length){k=xa("gclid");var l=xa("gdftrk");j.utm_campaign=k&&k.length&&k.length>0?"GoogleAdwords":l&&l.length&&l.length>0?"GoogleAffiliateNetwork":""}if(("GoogleAdwords"===j.utm_campaign||"GoogleAffiliateNetwork"===j.utm_campaign)&&(j.ref="http://www.google.com"),k=xa("gclid"),k&&k.length>0&&(j.utm_campaign="GoogleAdwords",j.utm_source="google",j.utm_content=k),j.href=a.location.href,!j.utm_content||""===j.utm_content){var m=C(H);m&&m.length>0&&(j.utm_content=m)}(j.utm_campaign||j.utm_source||j.utm_medium||j.utm_term||j.utm_content||j.ref&&j.ref.length>0)&&(V("Process marketing parameters","log",{processedParameters:j,paramSettings:{campaign:D,medium:E,source:F,term:G,content:H}}),$a(j,!1,null))}catch(n){V("processMarketingInfo error","error",n)}},Ga=function(){var b=f(a,"bouncex.utils.shqInterceptEvent.purchase");!b||localStorage.getItem("shq_intercept_conversion")||"function"!=typeof b&&b!==!0||(a.localStorage.setItem("shq_intercept_conversion","true"),V("localStorage item shq_intercept_conversion set to true","ok",f(a,"bouncex.utils.shqInterceptEvent")))},Ha=function(c){Ga(),V("shq_wknd_interaction to process","wknd",c),i(c);var d=c.eventname,e=c.params,g=c.obj;c.source;if(d&&e&&!e["shq:shq_bypass"]){if("item"===d&&y.push(e),"view item"===d&&(e["item:id"]||e["item:shq_id"]||e["view item:shq_id"])){var j=e["item:id"];e["item:shq_id"]&&(j=e["item:shq_id"]),e["view item:shq_id"]&&(j=e["view item:shq_id"]),j&&!h("productView",c)?Va({pageType:"product",productId:j}):V("could not resolve produduct ID for product view","error",e)}if("add to cart"===d){var k;if(k=e["item:shq_id"]?e["item:shq_id"]:e["item:id"]?e["item:id"]:null){var l=ia(k),m=h("cartAdd",c);if(l&&!m){var n=la(l["item:price"]),o=1;Ja.add({Items:[{ProductId:k,UnitPrice:n,Quantity:o}]})}else m||Ja.add({Items:[{ProductId:k,Quantity:1}]})}else h("cartAdd",c)?V("wknd pid does not exist, but add to cart event handled by shqInterceptEvent","warn",c):V("add to cart failed: could not get product id","error",c)}if("view category"===d&&e["page:title"]&&!h("categoryView",c)&&Va({pageType:"category",catName:e["page:title"],catId:e["page:title"]}),"pageview"===d&&("checkout"!==e.page_type||h("checkout",c)||Ka()),"user"===d){if(e["user:email"]){var p="";"campaign_submit"===e["user:source"]?p="marketing":"checkout"===e.page_type?p="transact":b.title.toLowerCase().indexOf("account")>-1&&(p="account");var q=h("email",c);p&&!q?(S=!0,Oa({email:e["user:email"],type:p})):q||setTimeout(function(){S||(V("defaulted to account type email because email type couldn't be identified","warn"),p="account",S=!0,Oa({email:e["user:email"],type:p}))},1e3)}e["user:phone"]&&!h("phone",c)&&Qa({number:e["user:phone"],type:"mobile"})}"requestemail"===d&&e.email&&!h("email",c)&&(S=!0,Oa({type:"marketing",email:e.email})),"empty_cart"!==d||h("cartEmpty",c)||Ja.empty()}else if(g&&!g["shq:shq_bypass"]&&g.order_id){var r={};if(r.orderId=g.order_id,r.total=g.amount?g.amount:null,r.orderItems=[],r.pageType="purchase",g.item)for(var s=0;s<g.item.length;s++){var t={};g.item[s].shq_id?t.productId=g.item[s].shq_id:g.item[s].sku?t.productId=g.item[s].sku:t.productId=g.item[s].product_id,t.price=la(g.item[s].price),t.qty=g.item[s].hasOwnProperty("quantity")&&Number(g.item[s].quantity)>0?g.item[s].quantity:1,t.productId&&t.price&&t.qty&&r.orderItems.push(t)}if("true"===localStorage.getItem("shq_intercept_conversion")){var u=0,v=function(){return u++,"undefined"!=typeof a.bouncex&&f(a,"bouncex.utils.shqInterceptEvent.purchase")||u>=3?void h("purchase",c):void setTimeout(v,500)};v()}else r.orderItems.length?Va(r):(Va({pageType:"purchase",orderId:r.orderId,usebasket:!0}),V("No products found","error",[g,r]));g.email&&!h("email",c)&&Oa({type:"transact",email:g.email}),g.phone&&!h("phone",c)&&Qa({number:g.phone,type:"mobile"})}else e&&e["shq:shq_bypass"]?V("You are using shq:shq_bypass on event","wknd",c):g||V("either event name or params were left out of onProcessWknd call","error",c)},Ia=function(a,c,d){if(a||(a={}),a.cartItems&&(a.Items=qa(a),delete a.cartItems),a.cartTotal&&Number(a.cartTotal)?(a.Total=Number(Number(a.cartTotal).toFixed(2)),delete a.cartTotal,b.dispatchEvent(new CustomEvent("shq_cart_event",{detail:a}))):a.Total&&Number(a.Total)?(a.Total=Number(Number(a.Total).toFixed(2)),b.dispatchEvent(new CustomEvent("shq_cart_event",{detail:a}))):"empty"!==c&&(a.Total=null),a.Items)for(var e=0;e<a.Items.length;e++){var f=a.Items[e];"number"==typeof f.UnitPrice?f.UnitPrice=Number(Number(f.UnitPrice).toFixed(2)):f.UnitPrice&&Number(la(f.UnitPrice))?f.UnitPrice=Number(la(Number(f.UnitPrice).toFixed(2))):f.UnitPrice&&(V("UnitPrice value "+f.UnitPrice+" could not be converted to number","Error"),delete f.UnitPrice),f.Quantity&&Number(f.Quantity)?f.Quantity=Number(f.Quantity):0===f.Quantity||Number(f.Quantity)||(V("Quantity value "+f.Quantity+" could not be converted to number","Error"),delete f.Quantity),f.ProductId&&"string"!=typeof f.ProductId&&(V("Converting product ID to a string","warn",f.ProductId),f.ProductId=f.ProductId.toString())}a.scraped_products&&Na(a.scraped_products),a.cartId?(a.CartId=a.cartId,delete a.cartId):a.CartId||(a.CartId=null),a.UtcTimestamp=pa(),"empty"===c||a.Items&&a.Items.length?(p=!0,Za({method:"POST",url:P.cart[c],body:{Event:a}})):a.Items&&!a.Items.length&&V("Could not process cart interaction because there were no valid products passed","error",a)},Ja={view:function(a){Ia(a,"view"),Ea("cartView",a)},add:function(a){Ia(a,"add"),Ea("cartAdd",a)},qty:function(a){Ia(a,"qty"),Ea("cartQuantity",a)},remove:function(a){Ia(a,"remove"),Ea("cartRemove",a)},empty:function(a){Ia(a,"empty"),Ea("cartEmpty",a)}},Ka=function(a){var b=Ea("onCheckout",a);R=ha.get("checkout_fired"),R||($a({action:"checkout",value:a&&a.value?a.value:"Page",dfint:a&&a.countOverride?a.countOverride:null},!1,null,b),ha.set("checkout_fired",!0))},La=function(a){var b=Ea("onCrm",a);a&&$a({action:"crm",custId:a.custId,dwId:a.dwId,daId:a.daId,crmId:a.crmId,loyaltyId:a.loyaltyId,mobiledeviceid:a.mobiledeviceid,omsid:a.omsid},!1,null,b)},Ma=function(a){if("object"==typeof a)for(var b in a)if(a[b]&&"object"==typeof a[b])if("function"==typeof a[b].getDate){var c=a[b].toLocaleDateString("en-us").replace(/\u200e/g,"");V("Converting date for "+b,"ok",[a[b],c]),a[b]=c}else V("CPD Property "+b+" is an invalid object","error",["Consider converting to a string or date",a[b]]),delete a[b];return a},Na=function(a){var b=Ea("onCustomProduct",a);if(a&&"object"==typeof a&&!Array.isArray(a)&&(a=[a]),a&&Array.isArray(a))for(var c=0;c<a.length;c++){var d=[Ma(a[c])],e=JSON.stringify(d);$a({action:"product_scrape",scraped_products:e},!1,null,b)}},Oa=function(a){var b=a&&a.type?a.type+"_collected":null;if(b&&!ha.get(b)){var c=Ea("onEmail",a);if(a&&!a.email?V("Email not provided","error",a):a||V("Email object not provided","error",a),a&&a.email&&(a.type||a.email_type)&&("string"==typeof a.type||"string"==typeof a.email_type)){var d=/"/g,f=a.email;d.test(f)&&(a.email=a.email.replace(d,""));var g=a.type?a.type.toLowerCase():a.email_type?a.email_type:null,h=e.EmailType[g];if("undefined"!=typeof h&&a.email)if(Da(a.email)||a.is_hash){var i=a.oi?a.oi===!0:h===e.EmailType.marketing,j={Email:a.email.trim(),EmailTypeId:h,IsOptIn:i?!0:!1,UtcTimestamp:pa()},k=Za({method:"POST",url:P.email,body:{Event:j}});if(k||q)q?V("Email not sent - CORS is not available and the get request fallback is dissabled","error",arguments):ha.set(b,!0);else{var l=a.completed&&"function"==typeof a.completed?a.completed:null;$a({action:"email",value:a.email.trim(),et:h,oi:i,is_hash:a.is_hash},!0,l,c)}}else!a.email||Da(a.email)||a.is_hash||V("Email failed validation","error",a);else V("email type"+a.type+"not recognized","error")}else V("onEmail error","error")}else b?V("Already collected "+a.type+"email","ok",a.email):V("Email type not found","error",a)},Pa=function(a){a=a||{};var b=Ea("onLanguage",a);z=e.PageType.Language,$a({action:"language",browserLanguage:a.language,clientSiteLanguage:a.clientSiteLanguage},!0,null,b)},Qa=function(a){var b=Ea("onPhone",a);if(a&&a.number&&a.type&&"string"==typeof a.type){var c=e.PhoneType[a.type.toLowerCase()];if("undefined"!=typeof c){var d=a.oi?a.oi===!0:!1;$a({action:"phone",value:a.number,type:c,oi:d},!0,null,b)}else V("phone type"+a.type+"not recognized","error")}else V("onPhone error","error")},Ra=function(a){var b,c,d=Ea("onPayment",a);if(a&&a.type){var f=e.PayType[a.type.toLowerCase()];"undefined"==typeof f&&(f=e.PayType.unknown);var g={action:"payment",pt:f};a.interaction&&e.PaymentInt[a.interaction]&&(g[e.PaymentInt[a.interaction]]=!0,"em"===a.interaction?(b=!0,c&&(g.ied=!0)):"ey"===a.interaction&&(c=!0,b&&(g.ied=!0))),$a(g,!1,null,d)}else V("error with payObj","error")},Sa=function(a){var b=a.action&&void 0!==e.productList.listActionType[a.action.toLowerCase()]?e.productList.listActionType[a.action.toLowerCase()]:-1,c=-1,d=a.productId,f=la(a.price),g=a.qty,h={},i=a.customList;a.listId&&(e.productList.listId[a.listId]>-1?(c=e.productList.listId[a.listId],h.lid=e.productList.listId[a.listId]):i&&(c=a.listId,h.lid=a.listId)),d&&(h.pid=d),g&&(h.quantity=g),c&&(h.lid=c),b&&(h.at=b),f&&(h.price=f),-1!==b&&(h.at=b),h.action="list";var j=Ea("onProductList",a);if(d&&-1!==b&&-1!==c||3===b&&-1!==c)$a(h,!1,function(){},j);else{var k="Missing required data from listData object";V("List Data Error","error",k)}},Ta=function(a){var b=Ea("onPromo",a);a&&a.code&&$a({action:"funint",funinttype:e.FunType.Promo,funintval:a.id,code:a.code},!1,null,b)},Ua=function(a){var b=Ea("onShip",a);if(a&&a.value&&a.value.toLowerCase){var c=e.ShipType[a.value.toLowerCase()];"undefined"!=typeof c?$a({action:"ship_change",value:c,text:a.value,dfint:a.isDefault},!1,null,b):V("shipping type"+a.value+"not recognized","error")}else V("error with shipObj","error")},Va=function(a){try{p||(p=!0,"object"!=typeof a.temp?a.temp={initialRequest:!0}:a.temp.initialRequest=!0);var b=Ea("pageView",a);if(a&&a.pageType){var c={product:function(a,b){if(a&&a.productId&&a.productId){var c=va;c&&c.length&&c.length>0?a.t=c.substr(0,120):a.productName&&a.productName.length&&a.productName.length>0?a.t=a.productName.substr(0,120):a.t=a.productId.substr(0,120),a.productId.length&&a.productId.length>40&&(a.productId=a.productId.substr(0,40),V("productId truncated","error",a)),Aa(a,"productId","pid"),Aa(a,"price","pr"),Aa(a,"productName","pn"),Aa(a,"catName","cn"),a.masterId=null,z=e.PageType.Product,a.scraped_products&&Na(a.scraped_products),ab(a,b)}},category:function(a,b){a&&!a.catId&&(a.catId=a.catName&&a.catName.replace?a.catName.replace(/\W/g,""):""),a.catId.length&&a.catId.length>64&&(a.catId=a.catId.substr(0,64));var c=va;a.t=c&&c.length>0?c.substr(0,120):a.catName.substr(0,120),Aa(a,"catId","cid"),Aa(a,"catName","cn"),z=e.PageType.Category,ab(a,b)},search:function(a,b){z=e.PageType.Search,Aa(a,"searchPhrase","sp"),ab(a,b)},purchase:function(a,b){if(z=e.PageType.Purchase,a&&a.orders&&a.orders.length&&(a.logpwp=!0,a.orderid=a.orders[0].orderId,a.total=ma(a.orders[0].total)),b.scraped_products&&Na(b.scraped_products),a.total=ma(a.total),ab(a,b),a&&a.orderItems&&a.orderItems.length){var c=function(a,b){if(a&&(a.orderId||a.orderid)){var c={action:"purchase",orderid:a.orderId,total:a.total};a.usebasket&&(c.usebasket=a.usebasket,(1===c.total||"1"===c.total)&&delete c.total),$a(c,!1,null,b)}else V("no order obj or orderid!","error");if(a&&a.orderItems&&a.orderItems.length){for(var d=a.orderItems,e=!1,f=0;f<d.length;f++)d[f]&&("string"==typeof d[f].productId&&d[f].productId.length>0||"number"==typeof d[f].productId)?(d[f].productId.length&&d[f].productId.length>64&&(d[f].productId=d[f].productId.substr(0,64),V("productId truncated!","error")),$a({action:"purchase_item",orderid:a.orderId,total:a.total,pid:d[f].productId,quantity:d[f].hasOwnProperty("qty")&&Number(d[f].qty)>0?d[f].qty:1,price:ma(d[f].price)},!1,null,b)):e=!0;e&&V("problem with one or more product IDs during purchase_item request","error",a)}};c(a,b)}else V("purchaseView Error: orders null or non array","error",a)}},d=c[a.pageType]||_;d(a,b)}else V("pageView called with no data or type!","error",a),_(a,b)}catch(f){V("pageView error","error",f)}},Wa=function(a){var b="",c=a.source?a.source.toLowerCase():"",d=a.action?a.action.toLowerCase():"",f=a.products?a.products:a.product?a.product:"";if(c&&d&&f){var g=e.trackRecs.action[d]?e.trackRecs.action[d]:"",h=e.trackRecs.source[c]?e.trackRecs.source[c]:"",i="";i="string"==typeof f?f:"object"==typeof f&&Array.isArray(f)?f.join():"";var j=Ea("trackRecs",a);g&&h&&i?$a({action:"prec",productList:i,raId:g,rsId:h},!1,function(){},j):(b="incorrect data passed|client",V("Request build error","error",b))}else b="not enough recs tracking data",V("Request build error","error",b)},Xa=function(a){var b=new XMLHttpRequest;return"withCredentials"in b?(b.open(a.method,a.url,!0),b.setRequestHeader("Content-Type","application/json"),b.setRequestHeader("Accept","application/json")):b=null,b},Ya=function(a){var b=a.url,c=a.body,d=c?btoa(JSON.stringify(c)):null;if(b&&d)if(d.length<x)V("SENDING GET FALLBACK","warn",a),$a({url:b,event:d});else if(V("Event request exceeds "+x+" characters. Breaking event up into multiple requests","warn",c),a.body.Event){var e=a.body.CookieId,f=a.body.SessionId,g=a.body.Event.UtcTimestamp;if(a.body.Event.Items)for(var h=a.body.Event.Items,i=a.body.Event.CartId,j=a.body.Event.Total,k=0;k<h.length;k++){var l={};l.CookieId=e,l.SessionId=f,l.Event={},l.Event.UtcTimestamp=g,l.Event.Total=j,l.Event.CartId=i,l.Event.items=[h[k]];var m=btoa(JSON.stringify(l));m.length>x?V("could not send product because object exceeds "+x+" characters","error",l):$a({url:b,event:m})}else V("Could not send event because object exceeds "+x+" characters and an alternative is not configured","error",a.body.Event)}},Za=function(a,b){function c(b,c){if(!(-1!==b.url.indexOf("strikeiron")||b.body.SessionId&&b.body.CookieId)){var d=aa(),e=ba();if(!d||!e)return V("CookieId or SessionId could not be resolved. Request canceled","error",arguments),!1;b.body.CookieId=d,b.body.SessionId=e,V("Had to get CookieId and/or SessionId on the last step of the post request. Something went wrong upstream.","warn",arguments)}var f=Xa(b);return null!==f?(f.onload=function(){if(204===f.status||f.responseText.length>0)c(JSON.parse(f.responseText));else if(f.responseText){var a=JSON.parse(f.responseText);c(null,a)}fa(ea()),p=!0},f.onerror=function(){c("Request failed.")},f.send(JSON.stringify(b.body)),!0):(Ya(a),!0)}if(eb(d),a){var e=aa(),f=ba();return d&&e&&f?db.prevSessionTimestamp&&da(db.prevSessionTimestamp)?(Q.waiting||(Q.waiting=!0,Va({pageType:"other",cu:!0})),V("waiting for updated session","warn",arguments),Q.watch(Za,arguments),!0):(a.body.CookieId=aa(),a.body.SessionId=ba(),c(a,b)):(Q.waiting||(Q.waiting=!0,Va({pageType:"other",cu:!0})),V("Waiting for valid cookie","warning",arguments),Q.watch(Za,arguments),!0)}return c(a,b)},$a=function(a,b,c,e){if(d){var f,g=new Image(1,1),h=a.action;a["class"];a.action&&delete a.action,a=a||{};var i=db.sessionid&&db.sessionid===B&&cb?cb:d;a.url?(f=a.url,delete a.url,f+=Ca(a,!0)):(f=oa(b),f+=O+"?r="+wa()+"&action="+h+"&i="+j,i&&(f+="&modalc="+encodeURIComponent(i)),f+=Ca(a,!1)),g.src=f.substr(0,x)}else d?V("REQUESTS BLOCKED BY DO NOT TRACK","error"):(Q.waiting||(Q.waiting=!0,Va({pageType:"other",cu:!0})),Q.watch($a,arguments),V("Waiting for valid cookie","warning",arguments))},_a=function(a,c){if(d||a.indexOf("cu=true")>-1){-1===a.indexOf("modalc")&&-1===a.indexOf("cu=true")&&(a+="&modalc="+d,V("Adding cookie to ashx request","log",[d,arguments]));var e=b.createElement("script");e.async=!0,e.src=a.substr(0,x);var f=b.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f)}else d?V("REQUESTS BLOCKED BY DO NOT TRACK","error"):(Q.waiting||(Q.waiting=!0,Va({pageType:"other",cu:!0})),Q.watch(_a,arguments),V("Waiting for valid cookie","warning",arguments))},ab=function(b,c){try{var e=ja();if(o=e?e:o,b&&"none"!==b.pageType){b.utc=za(),b.utm_campaign=null,b.ctid=xa(o),b.mobiledeviceid=void 0!==c.passed.mobiledeviceid?c.passed.mobiledeviceid:null,b.pushid=void 0!==c.passed.pushid?c.passed.pushid:null,b.loiid=null,b.scenarioid=null,b.pt=z,b.href=void 0!==c.passed.href?c.passed.href:a.location.href,b.hostn=a.location.hostname,b.pathn=ua,b.ref=sa(),b.cu=c.passed.cu,b.custom_product_details&&Na(b.custom_product_details);void 0!==b.jf?b.jf:!1;b.pageType&&delete b.pageType,b.temp&&delete b.temp;var f=oa(!1)+"SmarterHandler.ashx?r="+wa()+"&i="+j;d&&(f+="&modalc="+d),f+="&cb=_smtr.postprocess",a.shqChromeExtensionOn&&(f+="&diag=true"),f+=Ca(b),c&&c.srPageView&&Array.isArray(c.srPageView)&&c.srPageView.push({data:b,src:f}),_a(f,b.callback||null),p=!0}}catch(g){V("submitPageView","error",g)}},bb=function(a){try{a&&a.cv&&ga.set(u,a.cv,$({ce:a.ce,cp:a.cp,samesite:"none",secure:Y})),v=a.pr,d!==a.cv&&(cb=d),eb(a.cv),z!==e.PageType.Purchase&&a&&a.cv&&(d=a.cv,Q.waiting&&(Q.check=!0,Q.waiting=!1)),A||(A=!0,Fa())}catch(b){V("error processing shq response","error",b)}};d=ga.get(u);var cb=null,db={loiid:null,sessionid:null,sessionChanged:!1,newVisitor:!d,prevSessionTimestamp:null},eb=function(a){if(a){var b=a.split("^");b[1]&&(db.loiid=b[1]),b[2]&&(db.sessionid&&db.sessionid!==b[2]&&(db.prevSessionid=db.sessionid,db.sessionChanged=!0),db.sessionid=b[2]),b[0]&&(db.prevSessionTimestamp=b[0])}},fb={pageView:Va,onLanguage:Pa,onEmail:Oa,onCheckout:Ka,onPhone:Qa,onShip:Ua,onPayment:Ra,onPromo:Ta,onCrm:La,trackRecs:Wa,onProductList:Sa,onCustomProduct:Na,onCartView:Ja.view,onCartAdd:Ja.add,onCartQty:Ja.qty,onCartRemove:Ja.remove,onCartEmpty:Ja.empty,onProcessWknd:Ha,shq_debugger_log:V,setCampNameKey:J,setCampMediumKey:K,setCampSourceKey:L,setCampTermKey:M,setCampContentKey:N,processMarketingInfo:Fa},gb=c||[],hb={push:function(a){try{if(Array.isArray(a)){if(!(gb.length>0))return hb.exec(a);gb.push(a)}else V("Blocked external event push","warn",a)}catch(b){V("_smtr.push error","error",b)}return 1},exec:function(a){try{if(a&&a.length>0){var b=a.shift();if(fb.hasOwnProperty(b)&&"function"==typeof fb[b])return null===d&&(d=ga.get(u),eb(d)),fb[b].apply(null,a);V("_smtr.exec method "+b+" doesn't exist.","error")}}catch(c){V("_smtr.exec error","error",c)}return 1},postprocess:function(a){bb(a)},log:V,loaded:!0,DataLayerHandler:ra};for(a._smtr=hb,a._shq=hb;gb.length>0;){var ib=gb.shift();hb.exec(ib)}W(),j||V("INSTANCE ID NOT FOUND","error"),setTimeout(function(){p||Va({pageType:"other"})},4e3)}}(this,this.document,this._shq)}catch(err){try{window.console.log(err)}catch(finalerr){}}